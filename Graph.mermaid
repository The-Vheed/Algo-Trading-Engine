graph TB
    %% Data Sources
    CSV[("CSV Files<br/>Historical Data")]
    API[("Deriv API<br/>Live Data")]
    
    %% Configuration
    YAML[("YAML Config<br/>Strategy Rules")]
    
    %% Data Layer
    subgraph DataLayer["üóÑÔ∏è Data Layer"]
        DP[DataProvider]
        DS[DataStore<br/>In-Memory Cache]
        DV[DataValidator]
    end
    
    %% Analysis Layer
    subgraph AnalysisLayer["üîç Analysis Layer"]
        IE[IndicatorEngine]
        RD[RegimeDetector]
        SE[StrategyEngine]
        RM[RiskManager]
    end
    
    %% Execution Layer
    subgraph ExecutionLayer["‚ö° Execution Layer"]
        SG[SignalGenerator]
        OM[OrderManager]
        PT[PositionTracker]
    end
    
    %% Configuration Layer
    subgraph ConfigLayer["‚öôÔ∏è Configuration Layer"]
        CM[ConfigManager]
        SC[StrategyConfig]
        RC[RiskConfig]
    end
    
    %% Monitoring Layer
    subgraph MonitoringLayer["üìä Monitoring Layer"]
        PERF[PerformanceTracker]
        AM[AlertManager]
        LOG[Logger]
    end
    
    %% Backtesting System
    subgraph BacktestingSystem["üß™ Backtesting System"]
        BE[BacktestEngine]
        MET[MetricsCalculator]
        REP[ReportGenerator]
    end
    
    %% Main Application Controller
    MAIN[("üéØ Main Controller<br/>Trading System")]
    
    %% External Systems
    DERIV[("Deriv Trading API")]
    ALERTS[("Alert Channels<br/>Console/File/Email")]
    
    %% Data Flow Connections
    CSV --> DP
    API --> DP
    YAML --> CM
    
    DP --> DS
    DP --> DV
    DS --> IE
    DS --> RD
    
    CM --> SC
    CM --> RC
    SC --> SE
    RC --> RM
    
    IE --> RD
    IE --> SE
    RD --> SE
    SE --> SG
    RM --> SG
    
    SG --> OM
    OM --> PT
    OM --> DERIV
    PT --> PERF
    
    PERF --> AM
    AM --> ALERTS
    PERF --> LOG
    OM --> LOG
    
    %% Backtesting Connections
    DS --> BE
    IE --> BE
    RD --> BE
    SE --> BE
    RM --> BE
    BE --> MET
    MET --> REP
    
    %% Main Controller Connections
    MAIN --> DataLayer
    MAIN --> AnalysisLayer
    MAIN --> ExecutionLayer
    MAIN --> ConfigLayer
    MAIN --> MonitoringLayer
    MAIN --> BacktestingSystem
    
    %% Styling
    classDef dataStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef analysisStyle fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef executionStyle fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef configStyle fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef monitorStyle fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef backtestStyle fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    classDef externalStyle fill:#f5f5f5,stroke:#424242,stroke-width:2px
    classDef mainStyle fill:#ffecb3,stroke:#f57f17,stroke-width:3px
    
    class CSV,API,DS,DP,DV dataStyle
    class IE,RD,SE,RM analysisStyle
    class SG,OM,PT executionStyle
    class CM,SC,RC,YAML configStyle
    class PERF,AM,LOG monitorStyle
    class BE,MET,REP backtestStyle
    class DERIV,ALERTS externalStyle
    class MAIN mainStyle